import { defineConfig } from "tsdown";

export default defineConfig({
  entry: ["./src/index.ts"],
  target: "node22",
  clean: true,
  dts: true,
  sourcemap: true,
  platform: "neutral",
  noExternal: ["wesl-tooling"],
  external: [
    "fs",
    "module",
    "node:assert",
    "node:events",
    "node:fs",
    "node:fs/promises",
    "node:module",
    "node:path",
    "node:process",
    "node:stream",
    "node:string_decoder",
    "node:url",
    "node:util",
    "node:v8",
    "vitest-image-snapshot",
    "vitest",
    "wesl",
    "wesl-gpu",
  ],
  logLevel: "warn",
});
